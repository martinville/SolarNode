<!DOCTYPE html>
<html>
<link href="http://192.168.1.131/bootstrap.min.css.gz" rel="stylesheet" >

<style>

</style>

<body style="background-color:#9CA986;">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>


<div class="row p-3 rounded text-light">
    <div class="col-sm-3">
		<div class="col-12"> 			
			<nav class="navbar  navbar-dark bg-dark">
			  <div class="container-fluid">
				<img src="logo.png" alt="Bootstrap" class="img-fluid" width="330px;">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				  <span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
				  <ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
					  <a class="nav-link active" aria-current="page" href="#">Home</a>
					</li>
					<li class="nav-item dropdown">
					  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						System
					  </a>
					  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
						<li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#ModalSolarNodeSetup"><img src="solarnodeicon.png" alt="Bootstrap" class="img-fluid" width="30px;" > SolarNode Setup</a></li>
						<li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#ModalSunsynkAccount"><img src="sunsynk.png" alt="Bootstrap" class="img-fluid" width="30px;" > SunSynk Account</a></li>
						<li><a class="dropdown-item" href="#"><img src="homeassistant.png" alt="Bootstrap" class="img-fluid" width="30px;"> Home Assistant Integration</a></li>										
						<li><hr class="dropdown-divider"></li>
						<li><a class="dropdown-item" href="#">Device Information</a></li>
						<li><a class="dropdown-item" href="#">Update System</a></li>
						<li><a class="dropdown-item" href="#">Reboot System</a></li>
					  </ul>
					</li>
					<li class="nav-item">
					  <a class="nav-link" aria-current="page" href="#">About</a>
					</li>				
				  </ul>
				</div>
			  </div>
			</nav>
			<div class="col-sm-12" style="margin-top:10px;">
				<div class="card bg-dark text-light">
				  <div class="card-body">
					<span class="float-end">Martin Home</span>
					<img src="solar-plant.png" alt="Bootstrap" class="img-fluid" width="30px;"> <small>Solar Plant</small>
				  </div>
				</div>
			</div>			
			<div class="col-sm-12" style="margin-top:10px;">
				<div class="card bg-dark text-light">
				  <div class="card-body">
					<span class="float-end">10:10:10s</span>
					<img src="server.png" alt="Bootstrap" class="img-fluid" width="30px;"> <small>Server Up Time</small>
				  </div>
				</div>
			</div>
			<div class="col-sm-12" style="margin-top:10px;">
				<div class="card bg-dark text-light">
				  <div class="card-body">
					<span class="float-end">345kb</span>
					<img src="micro-sd-card.png" alt="Bootstrap" class="img-fluid" width="30px;"> <small>Internal Storage</small>
				  </div>
				</div>
			</div>
			<div class="col-sm-12" style="margin-top:10px;visibility:hidden;" id="idAdminModestatus">
				<div class="card bg-danger text-light">
				  <div class="card-body">					
					<button type="button" class="btn btn-sm btn-dark float-end">Disable</button>
					<small id="">Admin mode is currently enabled.</small>
				  </div>
				</div>
			</div>			
			
		</div>
	</div>
    <div class="col-sm-9">
		<div class="row">
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-body">
					<div class="hstack gap-3">
					  <div class="p-2"><img src="solar-inverter.png" alt="Bootstrap" class="img-fluid" width="40px;"> <small>Inverter Load</small></div>
					  <div class="p-2 ms-auto"><h6>232V, 23A</h6></div>
					</div>															
				  </div>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-body">
					<div class="hstack gap-3">
					  <div class="p-2"><img src="power.png" alt="Bootstrap" class="img-fluid" width="40px;"> <small>Grid</small></div>
					  <div class="p-2 ms-auto"><h6>232V, 50Hz</h6></div>
					</div>															
				  </div>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-body">
					<div class="hstack gap-3">
					  <div class="p-2"><img src="battery.png" alt="Bootstrap" class="img-fluid" width="40px;"> <small>Battery (24 &degC)</small></div>
					  <div class="p-2 ms-auto"><h6>53.30V, 86%</h6></div>
					</div>															
				  </div>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-body">
					<div class="hstack gap-3">
					  <div class="p-2"><img src="solarpanel.png" alt="Bootstrap" class="img-fluid" width="40px;"> <small>Solar Pannels</small></div>
					  <div class="p-2 ms-auto"><h6>232V, 23A</h6></div>
					</div>															
				  </div>
				</div>
			</div>
		</div>
		
		<div class="row" style="margin-top:10px;">
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-header">
					Load
				  </div>				
				  <div class="card-body text-center">
						<div id="guage_load"></div>														
				  </div>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-header">
					Grid
				  </div>				
				  <div class="card-body text-center">
						<div id="guage_grid"></div>														
				  </div>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-header">
					Battery
				  </div>				
				  <div class="card-body text-center">
						<div id="guage_battery"></div>														
				  </div>
				</div>
			</div>
			<div class="col-sm-3">
				<div class="card bg-dark text-light">
				  <div class="card-header">
					Battery
				  </div>				
				  <div class="card-body text-center">
						<div id="guage_solar"></div>														
				  </div>
				</div>
			</div>
			<div class="col-sm-12" style="margin-top:10px;">
				<div class="card bg-dark text-light">				
				  <div class="card-body">
							<button type="button" class="btn btn-light" onclick="updateGuagesLoad()">Update Load</button>													
							<button type="button" class="btn btn-light" onclick="updateGuagesGrid()">Update Grid</button>
							<button type="button" class="btn btn-light" onclick="updateGuagesBattery()">Update Battery</button>
							<button type="button" class="btn btn-light" onclick="updateGuagesSolar()">Update Solar</button>
							<canvas id="myChart" style="width:100%;max-height:500px;"></canvas>
				  </div>
				</div>
			</div>				
		

		</div>		
	</div>
</div>


<!-- SunsynkAccount Modal -->
<div class="modal fade " id="ModalSunsynkAccount" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog bg-dark">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel"><img src="sunsynk.png" alt="Bootstrap" class="img-fluid" width="40px;" > SunSynk Account</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
			<div class="mb-3">
			  <label for="exampleFormControlInput1" class="form-label">Email address</label>
			  <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="youremail@domain.com">
			</div>
			<div class="mb-3">
			  <label for="exampleFormControlTextarea1" class="form-label">Password</label>
			  <input type="password" class="form-control" id="exampleFormControlInput1" placeholder="Sunsynk Password">
			</div>
			<div class="mb-3">
			  <label for="exampleFormControlTextarea1" class="form-label">Inverter Serial Number</label>
			  <input type="password" class="form-control" id="exampleFormControlInput1" placeholder="Inverter Serial Number">
			</div>			
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-dark">Save changes</button>
      </div>
    </div>
  </div>
</div>

<!-- SolarNodeSetup Modal -->
<div class="modal fade " id="ModalSolarNodeSetup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog bg-dark">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel"><img src="solarnodeicon.png" alt="Bootstrap" class="img-fluid" width="40px;" > SolarNode Setup</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
			<div class="mb-3">
			  <label for="exampleFormControlInput1" class="form-label">Device Name</label>
			  <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="Device Name">
			</div>		
			<div class="mb-3">
				<label for="exampleFormControlInput1" class="form-label">Admin Mode</label>				
				<div class="input-group">
				  <input type="text" class="form-control" placeholder="Admin password" aria-label="Recipient's username with two button addons">
				  <button class="btn btn-danger" type="button">Enable</button>
				  <button class="btn btn-success" type="button">Disable</button>
				</div>	
				<div id="emailHelp" class="form-text">When admin mode is enabled you will be able to perform administrator related tasks on this SolarNode entity. Please remember to disable admin mode when done. Tip: Rebooting this device will revert back to non admin mode.</div>
			  
			</div>			
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-dark">Save changes</button>
      </div>
    </div>
  </div>
</div>



<script src="custom.js"></script>
<script src="bootstrap.bundle.js"></script>
<script src="guage.js"></script>

<script>
/*********************************************************************/
// Create knob1 element, 300 x 300 px in size.
var knob1 = pureknob.createKnob(120, 120);
// Set properties.
knob1.setProperty('angleStart', -0.75 * Math.PI);
knob1.setProperty('angleEnd', 0.75 * Math.PI);
knob1.setProperty('colorFG', '#9CA986');
knob1.setProperty('trackWidth', 0.4);
knob1.setProperty('valMin', 0);
knob1.setProperty('valMax', 100);

// Set initial value.
knob1.setValue(30);

/*
 * Event listener.
 *
 * Parameter 'knob' is the knob object which was
 * actuated. Allows you to associate data with
 * it to discern which of your knobs was actuated.
 *
 * Parameter 'value' is the value which was set
 * by the user.
 */
var listener = function(knob1, value) {
	console.log(value);
};

knob1.addListener(listener);

// Create element node.
var node = knob1.node();

// Add it to the DOM.
var elem1 = document.getElementById('guage_load');
elem1.appendChild(node);
/*********************************************************************/
// Create knob element, 300 x 300 px in size.
var knob2 = pureknob.createKnob(120, 120);
// Set properties.
knob2.setProperty('angleStart', -0.75 * Math.PI);
knob2.setProperty('angleEnd', 0.75 * Math.PI);
knob2.setProperty('colorFG', '#9CA986');
knob2.setProperty('trackWidth', 0.4);
knob2.setProperty('valMin', 0);
knob2.setProperty('valMax', 100);

// Set initial value.
knob2.setValue(50);

/*
 * Event listener.
 *
 * Parameter 'knob' is the knob object which was
 * actuated. Allows you to associate data with
 * it to discern which of your knobs was actuated.
 *
 * Parameter 'value' is the value which was set
 * by the user.
 */
var listener = function(knob2, value) {
	console.log(value);
};

knob2.addListener(listener);

// Create element node.
var node = knob2.node();

// Add it to the DOM.
var elem2 = document.getElementById('guage_grid');
elem2.appendChild(node);
/*********************************************************************/
// Create knob element, 300 x 300 px in size.
var knob3 = pureknob.createKnob(120, 120);
// Set properties.
knob3.setProperty('angleStart', -0.75 * Math.PI);
knob3.setProperty('angleEnd', 0.75 * Math.PI);
knob3.setProperty('colorFG', '#9CA986');
knob3.setProperty('trackWidth', 0.4);
knob3.setProperty('valMin', 0);
knob3.setProperty('valMax', 100);

// Set initial value.
knob3.setValue(70);

/*
 * Event listener.
 *
 * Parameter 'knob' is the knob object which was
 * actuated. Allows you to associate data with
 * it to discern which of your knobs was actuated.
 *
 * Parameter 'value' is the value which was set
 * by the user.
 */
var listener = function(knob, value) {
	console.log(value);
};

knob3.addListener(listener);

// Create element node.
var node = knob3.node();

// Add it to the DOM.
var elem3 = document.getElementById('guage_battery');
elem3.appendChild(node);
/*********************************************************************/
// Create knob element, 300 x 300 px in size.
var knob4 = pureknob.createKnob(120, 120);
// Set properties.
knob4.setProperty('angleStart', -0.75 * Math.PI);
knob4.setProperty('angleEnd', 0.75 * Math.PI);
knob4.setProperty('colorFG', '#9CA986');
knob4.setProperty('trackWidth', 0.4);
knob4.setProperty('valMin', 0);
knob4.setProperty('valMax', 100);

// Set initial value.
knob4.setValue(20);

/*
 * Event listener.
 *
 * Parameter 'knob' is the knob object which was
 * actuated. Allows you to associate data with
 * it to discern which of your knobs was actuated.
 *
 * Parameter 'value' is the value which was set
 * by the user.
 */
var listener = function(knob4, value) {
	console.log(value);
};

knob4.addListener(listener);

// Create element node.
var node = knob4.node();

// Add it to the DOM.
var elem4 = document.getElementById('guage_solar');
elem4.appendChild(node);
/*********************************************************************/

function updateGuagesLoad(){
	knob1.setValue(60);
	var elem1 = document.getElementById('guage_load');
}
function updateGuagesGrid(){
	knob2.setValue(60);
	var elem2 = document.getElementById('guage_grid');
}
function updateGuagesBattery(){
	knob3.setValue(60);
	var elem3 = document.getElementById('guage_battery');
}
function updateGuagesSolar(){
	knob4.setValue(60);
	var elem4 = document.getElementById('guage_solar');
}

</script>
<script>
const xValues = [100,200,300,400,500,600,700,800,900,1000];

new Chart("myChart", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{ 
      data: [860,1140,1060,1060,1070,1110,1330,2210,7830,2478],
      borderColor: "red",
      fill: false
    }, { 
      data: [1600,1700,1700,1900,2000,2700,4000,5000,6000,7000],
      borderColor: "green",
      fill: false
    }, { 
      data: [300,700,2000,5000,6000,4000,2000,1000,200,100],
      borderColor: "blue",
      fill: false
    }]
  },
  options: {
    legend: {display: false}
  }
});
</script>


</body>
</html>


